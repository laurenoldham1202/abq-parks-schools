

<!DOCTYPE html>

<html lang='en'>
<head>
    <meta charset='utf-8' />

    <title>Albuquerque Urban Geographies</title>
    <link
            rel='stylesheet'
            href='https://unpkg.com/leaflet@1.3.1/dist/leaflet.css'
    />
    <style>
        body,
        #map {
            position: absolute;
            width: 100%;
            top: 0;
            bottom: 0;
            margin: 0;
            padding: 0;
            background: rgba(0, 0, 0, 0.75);
        }
    </style>
</head>

<body>
<div id='map'></div>

<script src='https://unpkg.com/leaflet@1.3.1/dist/leaflet.js'></script>
<script
        src='https://code.jquery.com/jquery-3.2.1.min.js'
        integrity='sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4='
        crossorigin='anonymous'
></script>
<script>
    const options = {
        center: [33.726, -84.365],
        zoom: 2,
        minZoom: 9,
        maxZoom: 16,
        maxBounds: [[33.911, -94.032], [33.62, -94.772]]
    };
    const map = L.map('map', options);

    map.createPane('labels');
    map.getPane('labels').style.zindex = 650;
    map.getPane('labels').style.pointerEvents = 'none';

//    L.tileLayer(
//        'https://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}{r}.png',
//        {
//            attribution: '©OpenStreetMap, ©CartoDB',
//            pane: 'labels',
//        }
//    ).addTo(map);


    $.when(
        $.getJSON('data/bernalillo-county.json'),
        $.getJSON('data/city-limits.json'),
        $.getJSON('data/bike-trails.json'),
        $.getJSON('data/abq-schools.json'),
    ).done((county, cityLimits, bikeTrails, schools) => {
        drawMap(county, cityLimits, bikeTrails, schools);
    });

    function drawMap(countyData, cityLimitsData, bikeTrailsData, schoolsData) {
        L.geoJson(countyData).addTo(map);
        L.geoJson(cityLimitsData).addTo(map);
        L.geoJson(bikeTrailsData).addTo(map);
        L.geoJson(schoolsData).addTo(map);
    }
</script>
</body>
</html>
